# Chapter3. 함수

어떤 프로그램이든 가장 기본적인 단위는 함수이다.

## 작게만들어라

함수의 길이는 최대한 작게 만들어야 한다. 4줄이하는 되어야 한다고... 

## 블록과 들여쓰기

if/else문 while문 등에 들어가는 블록은 1단이나 2단을 넘어가서는 안된다. 

중첩구조가 생길만큼 항수가 커지면 안된다.

## 한가지만 해라

> **함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.**

함수 이름 아래에서 추상화 수준이 하나인 단계만 수행해야 한다.

🤨함수가 '한 가지'만 하는지 확인하는 방법?

단순히 다른 표현이 아니라 의미 있는 이름으로 해당 함수에서 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다.

## 함수 당 추상화 수준은 하나로

추상화 수준을 섞으면 표현이 근본 개념인지 세부사항인지 구분하기 어려워 헷갈리게 된다.

근본개념과 세부사항을 뒤섞기 시작하면 나도 모르게 함수에 세부사항들을 점점 추가하게 된다. (깨진 창문의 법칙)

### **위에서 아래로 코드읽기(내려가기 규칙)**

- 위에서 아래로 이야기처럼 읽혀야 좋다.
- 함수 추상화 수준이 한 번에 한 단계씩 낮아진다.

## Switch문

switch문은 작게 만들기 어렵지만(if/else의 연속도 마찬가지!), 다형성을 이용하여 switch문을 abstract factory에 숨겨 다형적 객체를 생성하는 코드 안에서만 switch를 사용하도록 한다.

## 서술적인 이름을 사용하라

> "코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행한다면 깨끗한 코드라 불러도 되겠다." (p.49)

함수는 작고 단순해야 하고, 하는 일을 이름에 잘 표현해야 한다.

길고 서술적인 이름이 길고 서술적인 주석보다 좋다...!

## 함수 인수

> "이상적인 인수 개수는 0개(무항)다. 다음은 1개(단항)고, 다음은 2개(이항)다." (p.50)

- 인수는 개념을 이해하기 어렵게 만든다.
- 별로 중요하지 않은 세부사항임에도 불구하고, 발견할 때마다 의미를 해석해야 하기 때문이다.
- 인수가 생기면 모든 경우의 수를 검증하는 테스트 케이스를 작성하기 복잡해진다.

### 인수를 없애는/줄이는 방법

- 인수를 현재 클래스의 static 변수로 만들어 인수로 넘기지 않는다.
- 별도의 클래스를 작성하여 인수를 생성자로 받아 그 클래스의 static 변수로 만들고, 그 클래스 내에서 메소드를 구현한다.
- 인수 클래스에 메소드를 추가하고 기존 클래스에서 객체.메소드 형태로 호출한다.
- 인수가 2-3개 필요하다면, 인수를 독자적인 클래스 변수로 선언한다.

### 단항 함수가 적절한 경우

- 인수에 질문을 던지는 경우

    예) `boolean fileExists("MyFile")`

- 인수를 뭔가로 변환해 결과로 반환하는 경우

    예) `InputStream fileOpen("MyFile")`

- 이벤트 (입력 인수로 시스템 상태를 바꾸는 경우)

    예) `void passwordAttemptFailedNtimes(int attempts)`

### 이항 함수가 적절한 경우

- 인수 2개가 한 값을 표현하고, 자연적인 순서가 있는 경우

    좋은 예) `Point p = new Point(0,0)`

    나쁜 예) `assertEquals(expected, actual)` 공감공감 .. 

### 플래그 인수는 금지

- 각 플래그 값에 따라 별도의 함수를 작성하라.

    예) `render(boolean isSuite)` → `renderForSuite()` & `renderForSingleTest()`

### 동사와 키워드

- 단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야 한다.

    예) `write(name)`

- 함수 이름에 인수에 관한 키워드를 추가하라.

    예) `write(name)` → `writeField(name)`예) `assertEquals()` → `assertExpectedEqualsActual(expected, actual)`

## 부수효과를 일으키지 마라

함수는 한 가지 기능만 하도록 작성하라. 몰래 다른일을 하지 마라.

두가지 일을 할경우 이름에 제대로 명시하기 .. 

느낀점

책을 읽고 나니 그동안 애매했던 부분이 명확해졌고, 안좋은 코드들도 주마등처럼 스쳐 지나갔다.. 

업무영역에서 함수형으로 완벽하게 짜는 것이 힘들기는 하겠지만.. 리팩토링은 정말 해도해도 끝이 없겠구나 라는 것을 느꼈다. 이 책에서 말하는 것 처럼 업무영역에서 두세줄로 함수를 쪼개기는 힘들겠지만 그래도 앞으로 신경써서 작게작게 만들어야겠다고 다짐했다 ~~~~~~~~~~